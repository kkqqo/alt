<script>
    Vue.component("select2", {
        template: `<select class="form-control"><slot></slot></select>`,
        mounted() {
            $(this.$el).select2();

            $(this.$el).on("change", () => {
                this.$emit('change', this);
            });
        },
        methods: {
            value() {
                return this.$el.value;
            }, empty() {
                $(this.$el).empty();
            }
        }
    });

    Vue.component("multiselect2", {
        template: `<select class="form-control" multiple><slot></slot></select>`,
        props: {
            value: {
                type: Array
            }
        }, mounted() {
            $(this.$el).select2();

            $(this.$el).val(this.value);
            $(this.$el).trigger('change')

            $(this.$el).on("change", () => {
                var data = $(this.$el).select2('data');

                let v = data.map(s => {
                    return s.id;
                });

                this.$emit("input", v);
            });
        }
    });
</script>